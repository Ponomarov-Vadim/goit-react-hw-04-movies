{"version":3,"sources":["services/api.js","components/Cast/Cast.module.css","pages/MovieDetailsPage/MovieDetailsPage.module.css","components/Cast/index.jsx","components/Reviews/index.jsx","pages/MovieDetailsPage/index.jsx"],"names":["BASE_URL","API_KEY","fetch","type","query","axios","get","module","exports","Cast","state","actorsList","this","props","match","params","movieId","then","response","setState","data","cast","castlist","map","actor","imgSrc","gender","key","id","className","styled","actorCard","src","alt","width","height","name","character","actorList","Component","Review","reviews","results","reviewsList","author","content","length","MovieDetailsPage","movieInfo","hideCast","history","push","url","handleClick","goBack","path","location","reliaseDate","split","locationList","pathname","genreList","genres","reduce","genresString","genre","onClick","border","wrapperImg","wrapperInfo","title","Math","round","popularity","overview","exact","to","button","component","Reviews"],"mappings":"uGAAA,qBAEMA,EAAW,gCACXC,EAAU,mCAUDC,IARD,WAA8C,IAA7CC,EAA4C,uDAArC,qBAAsBC,EAAe,uDAAP,GAClD,OAAOC,IAAMC,IAAN,UACFN,GADE,OACSG,EADT,oBACyBF,GADzB,OAEO,KAAVG,EAAe,UAAYA,EAAQ,O,mBCPzCG,EAAOC,QAAU,CAAC,UAAY,wBAAwB,UAAY,0B,mBCAlED,EAAOC,QAAU,CAAC,OAAS,iCAAiC,WAAa,qCAAqC,YAAc,sCAAsC,OAAS,mC,0KCGtJC,E,4MACnBC,MAAQ,CACNC,WAAY,I,kEAGO,IAAD,OAClBT,YAAM,SAAD,OAAUU,KAAKC,MAAMC,MAAMC,OAAOC,QAAlC,aAAqDC,MAAK,SAACC,GAAD,OAC7D,EAAKC,SAAS,CAAER,WAAYO,EAASE,KAAKC,Y,+BAIpC,IAEFC,EADiBV,KAAKF,MAApBC,WACoBY,KAAI,SAACC,GAC/B,IAAMC,EACsB,OAA1BD,EAAK,aAAL,uDACoDA,EAAK,cACpC,IAAjBA,EAAME,OACN,uFACA,uFAEN,OACE,wBAAIC,IAAKH,EAAMI,GAAIC,UAAWC,IAAOC,WACnC,yBAAKC,IAAKP,EAAQQ,IAAI,QAAQC,MAAM,MAAMC,OAAO,QACjD,8BAAOX,EAAMY,MACb,4CAAkBZ,EAAMa,eAI9B,OACE,oCACE,wBAAIR,UAAWC,IAAOQ,WAAYhB,Q,GA/BRiB,aCDbC,E,4MACnB9B,MAAQ,CACN+B,QAAS,I,kEAEU,IAAD,OAClBvC,YAAM,SAAD,OAAUU,KAAKC,MAAMC,MAAMC,OAAOC,QAAlC,aAAqDC,MAAK,gBAAGG,EAAH,EAAGA,KAAH,OAC7D,EAAKD,SAAS,CAAEsB,QAASrB,EAAKsB,e,+BAIxB,IACAD,EAAY7B,KAAKF,MAAjB+B,QACFE,EAAcF,EAAQlB,KAAI,gBAAGK,EAAH,EAAGA,GAAIgB,EAAP,EAAOA,OAAQC,EAAf,EAAeA,QAAf,OAC9B,wBAAIlB,IAAKC,GACP,4BAAKgB,GACL,2BAAIC,OAGR,OACE,4BACGJ,EAAQK,OACLH,EACA,gD,GAtBwBJ,a,iBCKfQ,E,4MACnBrC,MAAQ,CACNsC,UAAW,M,EASbC,SAAW,kBAAM,EAAKpC,MAAMqC,QAAQC,KAAK,EAAKtC,MAAMC,MAAMsC,IAAK,EAAK1C,Q,EAEpE2C,YAAc,WAAO,IACXH,EAAY,EAAKrC,MAAjBqC,QAEJA,EAAQJ,OAAS,EACnBI,EAAQI,SAKVJ,EAAQC,KAAK,IAAK,EAAKzC,Q,kEAjBJ,IAAD,OAClBR,YAAM,SAAD,OAAUU,KAAKC,MAAMC,MAAMC,OAAOC,UAAWC,MAAK,SAACC,GAAD,OACrD,EAAKC,SAAS,CAAE6B,UAAW9B,EAASE,Y,+BAkB9B,IACA4B,EAAcpC,KAAKF,MAAnBsC,UADD,EAKHpC,KAAKC,MALF,IAGLC,MAASsC,EAHJ,EAGIA,IAAKG,EAHT,EAGSA,KACdC,EAJK,EAILA,SAGIC,EAAcT,EAChBA,EAAS,aAAiBU,MAAM,KAAK,GACrC,GAEEC,EAAeH,EAASI,SAASF,MAAM,KAEvCjC,EACU,OAAduB,GAAA,yDACkDA,EAAS,aAGvDa,GAFWb,EAAYA,EAAUc,OAAS,IAEvBC,QACvB,SAACC,EAAcC,GAAf,gBAA4BD,EAA5B,YAA4CC,EAAM7B,KAAlD,OACA,IAGF,OACE,oCACE,4BAAQ8B,QAAStD,KAAKyC,aAAc,aACjCL,GACD,yBAAKnB,UAAWC,IAAOqC,QACrB,yBAAKtC,UAAWC,IAAOsC,YACpB3C,GAAU,yBAAKO,IAAKP,EAAQQ,IAAI,YAGnC,yBAAKJ,UAAWC,IAAOuC,aACrB,sCAAQrB,EAAUsB,MAAlB,aAA4Bb,EAA5B,MACA,6CAAmBc,KAAKC,MAAMxB,EAAUyB,YAAc,KAEtD,wCACA,2BAAIzB,EAAU0B,UAEd,sCACA,2BAAIb,KAIV,yBAAKhC,UAAWC,IAAOqC,QACrB,qDAEA,4BACE,4BACE,kBAAC,IAAD,CAASQ,OAAK,EAACC,GAAE,UAAKxB,EAAL,UAAjB,QAG2C,SAA1CO,EAAaA,EAAab,OAAS,IAClC,4BAAQjB,UAAWC,IAAO+C,OAAQX,QAAStD,KAAKqC,UAAhD,UAMJ,4BACE,kBAAC,IAAD,CAAS2B,GAAE,UAAKxB,EAAL,aAAX,WAC2C,YAA1CO,EAAaA,EAAab,OAAS,IAClC,4BAAQjB,UAAWC,IAAO+C,OAAQX,QAAStD,KAAKqC,UAAhD,YAOR,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOM,KAAI,UAAKA,EAAL,SAAkBuB,UAAWrE,IACxC,kBAAC,IAAD,CAAO8C,KAAI,UAAKA,EAAL,YAAqBuB,UAAWC,U,GAhGPxC","file":"static/js/4.fbfd996d.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst BASE_URL = \"https://api.themoviedb.org/3/\";\r\nconst API_KEY = \"c568eb497a154e87132efaa568a83ee9\";\r\n\r\nconst fetch = (type = \"trending/movie/day\", query = \"\") => {\r\n  return axios.get(\r\n    `${BASE_URL}${type}?api_key=${API_KEY}${\r\n      query !== \"\" ? \"&query=\" + query : \"\"\r\n    }`\r\n  );\r\n};\r\n\r\nexport default fetch;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"actorCard\":\"Cast_actorCard__I19US\",\"actorList\":\"Cast_actorList__JEg4y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"border\":\"MovieDetailsPage_border__22UNx\",\"wrapperImg\":\"MovieDetailsPage_wrapperImg__2e8Pm\",\"wrapperInfo\":\"MovieDetailsPage_wrapperInfo__2V53G\",\"button\":\"MovieDetailsPage_button__Ph7yw\"};","import React, { Component } from \"react\";\r\nimport fetch from \"../../services/api\";\r\nimport styled from \"./Cast.module.css\";\r\n\r\nexport default class Cast extends Component {\r\n  state = {\r\n    actorsList: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    fetch(`movie/${this.props.match.params.movieId}/credits`).then((response) =>\r\n      this.setState({ actorsList: response.data.cast })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { actorsList } = this.state;\r\n    const castlist = actorsList.map((actor) => {\r\n      const imgSrc =\r\n        actor[\"profile_path\"] !== null\r\n          ? `https://image.tmdb.org/t/p/w138_and_h175_face${actor[\"profile_path\"]}`\r\n          : actor.gender === 1\r\n          ? \"https://cdn1.savepice.ru/uploads/2020/5/31/c7130eda9f42f0501e700fe1372e6914-full.jpg\"\r\n          : \"https://cdn1.savepice.ru/uploads/2020/5/31/31a796d4910f3d692cab34f99484fd2a-full.jpg\";\r\n\r\n      return (\r\n        <li key={actor.id} className={styled.actorCard}>\r\n          <img src={imgSrc} alt=\"Actor\" width=\"138\" height=\"175\" />\r\n          <span>{actor.name}</span>\r\n          <span>Character: {actor.character}</span>\r\n        </li>\r\n      );\r\n    });\r\n    return (\r\n      <>\r\n        <ul className={styled.actorList}>{castlist}</ul>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport fetch from \"../../services/api\";\r\n\r\nexport default class Review extends Component {\r\n  state = {\r\n    reviews: [],\r\n  };\r\n  componentDidMount() {\r\n    fetch(`movie/${this.props.match.params.movieId}/reviews`).then(({ data }) =>\r\n      this.setState({ reviews: data.results })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { reviews } = this.state;\r\n    const reviewsList = reviews.map(({ id, author, content }) => (\r\n      <li key={id}>\r\n        <h3>{author}</h3>\r\n        <p>{content}</p>\r\n      </li>\r\n    ));\r\n    return (\r\n      <ul>\r\n        {reviews.length\r\n          ? reviewsList\r\n          : \"We don't have any reviews for this movie\"}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Route, Switch, NavLink } from \"react-router-dom\";\r\nimport Cast from \"../../components/Cast\";\r\nimport Reviews from \"../../components/Reviews\";\r\nimport fetch from \"../../services/api\";\r\n\r\nimport styled from \"./MovieDetailsPage.module.css\";\r\n\r\nexport default class MovieDetailsPage extends Component {\r\n  state = {\r\n    movieInfo: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    fetch(`movie/${this.props.match.params.movieId}`).then((response) =>\r\n      this.setState({ movieInfo: response.data })\r\n    );\r\n  }\r\n\r\n  hideCast = () => this.props.history.push(this.props.match.url, this.state);\r\n\r\n  handleClick = () => {\r\n    const { history } = this.props;\r\n\r\n    if (history.length > 2) {\r\n      history.goBack();\r\n      // console.log(); history is broken\r\n\r\n      return;\r\n    }\r\n    history.push(\"/\", this.state);\r\n  };\r\n\r\n  render() {\r\n    const { movieInfo } = this.state;\r\n    const {\r\n      match: { url, path },\r\n      location,\r\n    } = this.props;\r\n\r\n    const reliaseDate = movieInfo\r\n      ? movieInfo[\"release_date\"].split(\"-\")[0]\r\n      : \"\";\r\n\r\n    const locationList = location.pathname.split(\"/\");\r\n\r\n    const imgSrc =\r\n      movieInfo !== null &&\r\n      `https://image.tmdb.org/t/p/w300_and_h450_bestv2${movieInfo[\"poster_path\"]}`;\r\n    const genres = !!movieInfo ? movieInfo.genres : [];\r\n\r\n    const genreList = genres.reduce(\r\n      (genresString, genre) => `${genresString} ${genre.name} `,\r\n      \"\"\r\n    );\r\n\r\n    return (\r\n      <>\r\n        <button onClick={this.handleClick}>{\"Go Back\"}</button>\r\n        {!!movieInfo && (\r\n          <div className={styled.border}>\r\n            <div className={styled.wrapperImg}>\r\n              {imgSrc && <img src={imgSrc} alt=\"poster\" />}\r\n            </div>\r\n\r\n            <div className={styled.wrapperInfo}>\r\n              <h2>{`${movieInfo.title} (${reliaseDate})`}</h2>\r\n              <span>User score: {Math.round(movieInfo.popularity) + \"%\"}</span>\r\n\r\n              <h3>Overview</h3>\r\n              <p>{movieInfo.overview}</p>\r\n\r\n              <h4>Genres</h4>\r\n              <p>{genreList}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className={styled.border}>\r\n          <h3>Aditional information</h3>\r\n\r\n          <ul>\r\n            <li>\r\n              <NavLink exact to={`${url}/cast`}>\r\n                Cast\r\n              </NavLink>\r\n              {locationList[locationList.length - 1] === \"cast\" && (\r\n                <button className={styled.button} onClick={this.hideCast}>\r\n                  Close\r\n                </button>\r\n              )}\r\n            </li>\r\n\r\n            <li>\r\n              <NavLink to={`${url}/reviews`}>Reviews</NavLink>\r\n              {locationList[locationList.length - 1] === \"reviews\" && (\r\n                <button className={styled.button} onClick={this.hideCast}>\r\n                  Close\r\n                </button>\r\n              )}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <Switch>\r\n          <Route path={`${path}/cast`} component={Cast} />\r\n          <Route path={`${path}/reviews`} component={Reviews} />\r\n        </Switch>\r\n      </>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}